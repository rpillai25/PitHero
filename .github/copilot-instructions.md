# GitHub Copilot Instructions – Pit Hero Event-Driven Version

- The project is written in C# using **FNA + Nez** (not MonoGame).
- Game runs as a **horizontal strip** at bottom of screen (borderless, always-on-top, click-through optional)
- Virtual resolution: 1920×360
- ECS pattern using **Nez framework**:
  - All components inherit from `Nez.Component`
  - Use `Nez.RenderableComponent` or custom extensions for rendering
  - Hero has a collider whose PhysicsLayer is GameConfig.PhysicsHeroWorldLayer.  The PhysicsLayer determines which colliders collide with this
  - Hero collider currently collides with TileMap (GameConfig.PhysicsTileMapLayer)
- Architecture constraints:
  - **Single Hero**: There is only ever 1 active hero at a time (no multiple heroes)
  - **Single Pit**: There is only ever 1 active pit with configured size (not random size)
  - **Individual Components**: Each component class should be in its own file
  - **MSTest**: Use standard MSTest framework for testing, not custom test runners
  - **Nez Boilerplate**: Keep Program.cs as standard Nez boilerplate (FNA setup).  This should not be modified unless absolutely required when there is no other workaround.
- Rendering/UI:
  - Live strip renders current `WorldState`
  - TileMap Layers
    - `Base`: The lowest layer
    - `Collision`: The collision layer	
	- `FogOfWar`: The FogOfWar layer (4 surrounding FogOfWar tiles cleared whenever Hero lands on tile underneath)
- Keep all constants (sizes, positions, movement speeds) in `GameConfig.cs`
- If a private method needs to be called from another class, change that method to be public.
- Avoid the use of Reflection.
- Do not add multiple classes to a single file. Classes should be in their own file.  Structs are an exception to this rule.
- Maintain integer scaling for pixel-perfect rendering
- Ensure the game continues running in idle while the player interacts with other desktop apps
- **Debug Logging Requirements**:
  - Use Nez.Debug for all logs
  - When logging Vectors and Points, log the X & Y components individually.  You can't just write the Vector/Point itself.
  - When logging Rectangles, log the X, Y, Width, and Height individually.  You can't just write the Rectangle itself.
- **Build Requirements**: 
  - Run `getFNA.sh` with automatic "yes" response before building to initialize FNA submodule and dependencies
    - cd /home/runner/work/PitHero/PitHero && echo "y" | ./getFNA.sh
  - Both FNA and Nez must be properly initialized before building.  Check that both subfolders are there.
- **Nez Architecture Compliance**:
  - Game1 should inherit from `Nez.Core`, not override Draw() or Update() methods
  - Scenes should inherit from `Nez.Scene` and override Initialize() for setup
  - Use Nez.Time class instead of custom GameTime management
  - All components under ECS/Components/, Scenes under ECS/Scenes/
  - If a Service needs to be easily accessed in multiple places, register it with Core.Services.AddService() and then get it from anywhere with Core.Services.GetService<Service>()
  